var MyLib;(()=>{"use strict";var e={d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{clearOptions:()=>r,displayedGeo:()=>s,geonamesApi:()=>c,keysInfo:()=>a,postData:()=>o,weatherbit:()=>i});const o=async(e=" ",t={})=>{const o=await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});try{return await o.json()}catch(e){console.log("eror",e)}};async function a(){let e=await fetch("http://localhost:3080/keyData");try{return await e.json()}catch(e){console.log("error",e)}}let n=[],l={key:"",place:"",state:"",lat:"",long:"",date:""};const c=async e=>{let t=document.getElementById("destination");n=[];const o=await fetch("http://api.geonames.org/searchJSON?q="+t.value+"&maxRows=20&username="+e);try{const e=await o.json();console.log(e),console.log(e.geonames);for(let t=0;t<e.geonames.length;t++)l={key:t,place:Object.values(e.geonames[t].toponymName).join(""),state:Object.values(e.geonames[t].adminName1).join(""),country:Object.values(e.geonames[t].countryName).join(""),lat:Object.values(e.geonames[t].lat).join(""),long:Object.values(e.geonames[t].lng).join("")},n.push(l);console.log("current options = ",n),console.log("newOptions = ",l),s(n)}catch(e){console.log("error",e)}},s=e=>{const t=document.createElement("select");document.getElementById("select_location").appendChild(t);for(let o=0;o<e.length;o++){let a=o+1,n="Location: "+Object.values(e[o].place).join("").toUpperCase(),l="State: "+Object.values(e[o].state).join("").toUpperCase(),c="Country: "+Object.values(e[o].country).join("").toUpperCase(),s=document.createElement("option");s.textContent=a+". "+n+"  "+l+"  "+c,t.appendChild(s)}t.addEventListener("change",(e=>{let t=Object.values(e.target.value).join(""),o=0,a=[];for(;parseInt(t[o]);)a.push(t[o]),o++;let l=n[a.join("")-1];n=l,console.log("lat = "+l.lat+" long = "+l.long),console.log("all choice "+Object.entries(l)),console.log(n.lat,n.long,n.key,n.key),MyLib.postData("http://localhost:3080/currentUserData",{key:n.key,place:n.place,state:n.state,country:n.country,lat:n.lat,long:n.long,date:""})}))},r=()=>{const e=document.querySelector("select");e&&e.remove()},i=async e=>{const t=await fetch("https://api.weatherbit.io/v2.0/normals?lat=38.0&lon=-78.0&start_day=02-02&end_day=03-01&tp=daily&key="+e);try{const e=await t.json();console.log(e)}catch(e){console.log("error",e)}};MyLib=t})();