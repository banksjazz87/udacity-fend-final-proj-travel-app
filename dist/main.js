var MyLib;(()=>{"use strict";var e={d:(o,t)=>{for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{clearOptions:()=>r,displayedGeo:()=>s,geonamesApi:()=>c,keysInfo:()=>n,postData:()=>t});const t=async(e=" ",o={})=>{await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(o)});try{await response.json()}catch(e){console.log("eror",e)}};async function n(){let e=await fetch("http://localhost:3080/keyData");try{const o=await e.json();MyLib.geonamesApi(o.geonames)}catch(e){console.log("error",e)}}let a=[],l={key:"",place:"",state:"",lat:"",long:"",date:""};const c=async e=>{let o=document.getElementById("destination");a=[];const t=await fetch("http://api.geonames.org/searchJSON?q="+o.value+"&maxRows=20&username="+e);try{const e=await t.json();console.log(e),console.log(e.geonames);for(let o=0;o<e.geonames.length;o++)l={key:o,place:Object.values(e.geonames[o].toponymName).join(""),state:Object.values(e.geonames[o].adminName1).join(""),country:Object.values(e.geonames[o].countryName).join(""),lat:Object.values(e.geonames[o].lat).join(""),long:Object.values(e.geonames[o].lng).join("")},a.push(l);console.log("current options = ",a),console.log("newOptions = ",l),s(a)}catch(e){console.log("error",e)}},s=e=>{const o=document.createElement("select");document.getElementById("select_location").appendChild(o);for(let t=0;t<e.length;t++){let n=t+1,a="Location: "+Object.values(e[t].place).join("").toUpperCase(),l="State: "+Object.values(e[t].state).join("").toUpperCase(),c="Country: "+Object.values(e[t].country).join("").toUpperCase(),s=document.createElement("option");s.textContent=n+". "+a+"  "+l+"  "+c,o.appendChild(s)}o.addEventListener("change",(e=>{let o=Object.values(e.target.value).join(""),t=0,n=[];for(;parseInt(o[t]);)n.push(o[t]),t++;let l=a[n.join("")-1];a=l,console.log("lat = "+l.lat+" long = "+l.long),console.log("all choice "+Object.entries(l)),console.log(a.lat,a.long,a.key,a.key),MyLib.postData("/currentUserData",{lat:l.lat})}))},r=()=>{const e=document.querySelector("select");e&&e.remove()};MyLib=o})();